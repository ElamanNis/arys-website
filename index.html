<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARYS - Центр строительных решений</title>
    <!-- Подключение Font Awesome для иконок (хотя в текущей версии используются эмодзи, FA может быть полезен для других иконок) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Общие сбросы и базовые стили */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f0f2f5 0%, #e0e4eb 100%); /* Более мягкий градиентный фон */
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Шапка сайта */
        .header {
            background: linear-gradient(135deg, #e74c3c, #c0392b); /* Красный градиент */
            color: white;
            padding: 30px;
            border-radius: 20px; /* Более скругленные углы */
            margin-bottom: 40px; /* Увеличенный отступ */
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0,0,0,0.2); /* Более выраженная тень */
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            animation: float 20s infinite linear;
            opacity: 0.7;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            100% { transform: translateY(-100px); }
        }

        .header h1 {
            font-size: 4em; /* Крупнее заголовок */
            font-weight: 800; /* Более жирный */
            margin-bottom: 10px;
            text-shadow: 0 5px 10px rgba(0,0,0,0.4); /* Более выраженная тень текста */
        }

        .header p {
            font-size: 1.3em; /* Крупнее подзаголовок */
            opacity: 0.95;
        }

        /* Поиск */
        .search-bar {
            background: white;
            padding: 18px; /* Увеличенный отступ */
            border-radius: 30px; /* Более скругленные углы */
            margin-bottom: 50px; /* Увеличенный отступ */
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 12px 35px rgba(0,0,0,0.15); /* Более выраженная тень */
            transition: all 0.3s ease;
        }

        .search-bar:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        }

        .search-bar input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 1.2em; /* Крупнее текст */
            padding: 10px;
        }

        .search-icon {
            width: 28px; /* Крупнее иконка */
            height: 28px;
            opacity: 0.7;
        }

        /* Категории */
        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Адаптивная сетка */
            gap: 30px; /* Увеличенный отступ */
            margin-bottom: 60px;
        }

        .category-card {
            background: white;
            padding: 35px; /* Увеличенный отступ */
            border-radius: 25px; /* Более скругленные углы */
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.12); /* Более выраженная тень */
            position: relative;
            overflow: hidden;
            border: 2px solid transparent; /* Для эффекта при наведении */
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.15), transparent); /* Более заметный блеск */
            transform: rotate(45deg);
            transition: all 0.5s;
            opacity: 0;
        }

        .category-card:hover::before {
            animation: shine 0.5s ease-in-out forwards; /* forwards для сохранения состояния */
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
        }

        .category-card:hover {
            transform: translateY(-12px) scale(1.03); /* Более заметный подъем и масштабирование */
            box-shadow: 0 25px 50px rgba(0,0,0,0.2); /* Сильнее тень */
            border-color: #e74c3c; /* Красная обводка при наведении */
        }

        .category-icon {
            width: 90px; /* Крупнее иконка */
            height: 90px;
            margin: 0 auto 25px; /* Увеличенный отступ */
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em; /* Крупнее эмодзи */
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); /* Тень для иконок */
        }

        /* Цвета для иконок категорий */
        .materials { background: linear-gradient(135deg, #3498db, #2980b9); } /* Синий */
        .rent { background: linear-gradient(135deg, #e74c3c, #c0392b); } /* Красный */
        .courses { background: linear-gradient(135deg, #f39c12, #e67e22); } /* Оранжевый */
        .consultation { background: linear-gradient(135deg, #27ae60, #229954); } /* Зеленый */
        .delivery { background: linear-gradient(135deg, #9b59b6, #8e44ad); } /* Фиолетовый */
        .profile { background: linear-gradient(135deg, #34495e, #2c3e50); } /* Темно-серый */

        .category-card h3 {
            font-size: 1.6em; /* Крупнее заголовок */
            margin-bottom: 10px;
            color: #2c3e50;
            font-weight: 700;
        }

        .category-card p {
            color: #7f8c8d;
            font-size: 1em;
        }

        /* Популярные товары */
        .popular-section {
            background: white;
            padding: 50px; /* Увеличенный отступ */
            border-radius: 25px;
            margin-bottom: 50px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .popular-section h2 {
            font-size: 2.5em; /* Крупнее заголовок */
            margin-bottom: 35px;
            color: #2c3e50;
            text-align: center;
            font-weight: 700;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 30px;
        }

        .product-card {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
        }

        .product-card:hover {
            transform: translateY(-8px);
            border-color: #3498db;
            background: white;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 120px; /* Крупнее изображение */
            height: 120px;
            margin: 0 auto 25px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em; /* Крупнее эмодзи */
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* Цвета для изображений товаров */
        .brick { background: linear-gradient(135deg, #e67e22, #d35400); }
        .gravel { background: linear-gradient(135deg, #95a5a6, #7f8c8d); }
        .cement { background: linear-gradient(135deg, #34495e, #2c3e50); }

        .product-card h3 {
            font-size: 1.4em;
            margin-bottom: 10px;
            color: #2c3e50;
            font-weight: 600;
        }

        .product-price {
            font-size: 1.2em;
            color: #27ae60;
            font-weight: 700;
            margin-bottom: 18px;
        }

        .product-tag {
            display: inline-block;
            padding: 6px 18px;
            border-radius: 25px;
            font-size: 0.9em;
            color: white;
            font-weight: 500;
            margin-top: 10px;
        }

        .in-stock { background: #27ae60; }
        .on-order { background: #f39c12; }
        .out-of-stock { background: #e74c3c; }

        /* Промо-секции */
        .promo-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .promo-card {
            padding: 35px;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .promo-card:hover {
            transform: translateY(-8px) scale(1.01);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .telegram-promo {
            background: linear-gradient(135deg, #f39c12, #e67e22); /* Оранжевый градиент */
        }

        .course-promo {
            background: linear-gradient(135deg, #27ae60, #229954); /* Зеленый градиент */
        }

        .promo-card h3 {
            font-size: 1.6em;
            margin-bottom: 12px;
            font-weight: 700;
        }

        .promo-card p {
            opacity: 0.95;
            line-height: 1.5;
        }

        /* Навигационная панель (нижняя) */
        .navbar {
            background: #2c3e50; /* Темно-серый фон */
            padding: 18px 0; /* Увеличенный отступ */
            border-radius: 20px;
            margin-top: 40px;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.1);
        }

        .navbar-content {
            display: flex;
            justify-content: space-around;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .nav-item {
            color: white;
            text-decoration: none;
            padding: 12px 25px;
            border-radius: 15px;
            transition: all 0.3s ease;
            position: relative;
            font-size: 1.1em;
            font-weight: 500;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-3px);
        }

        .nav-item.active {
            background: #3498db; /* Активный синий цвет */
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .cart-badge {
            position: absolute;
            top: -10px; /* Смещено вверх */
            right: -10px; /* Смещено вправо */
            background: #e74c3c; /* Красный цвет */
            color: white;
            border-radius: 50%;
            width: 24px; /* Крупнее */
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9em;
            font-weight: bold;
            border: 2px solid white; /* Белая обводка */
        }

        /* Модальные окна */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7); /* Более темный фон */
            z-index: 1000;
            display: flex; /* Используем flex для центрирования */
            justify-content: center;
            align-items: center;
            opacity: 0; /* Для анимации */
            transition: opacity 0.3s ease;
        }

        .modal.show {
            opacity: 1;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 25px; /* Более скругленные углы */
            max-width: 700px; /* Шире модалка */
            width: 90%;
            max-height: 90vh; /* Ограничение по высоте */
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3); /* Сильнее тень */
            position: relative;
            transform: translateY(20px); /* Для анимации */
            transition: transform 0.3s ease;
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 2.2em; /* Крупнее */
            cursor: pointer;
            color: #999;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: #333;
        }

        .modal h2 {
            font-size: 2.2em;
            margin-bottom: 25px;
            color: #2c3e50;
            font-weight: 700;
        }

        .modal p {
            line-height: 1.7;
            margin-bottom: 20px;
            color: #555;
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 14px 30px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 10px 5px;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.5);
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 25px 0;
            justify-content: center;
        }

        .quantity-btn {
            background: #3498db;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5em;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
        }

        .quantity-btn:hover {
            background: #2980b9;
            transform: scale(1.15);
        }

        .quantity-display {
            padding: 8px 20px;
            background: #f0f2f5;
            border-radius: 15px;
            font-weight: bold;
            min-width: 50px;
            text-align: center;
            font-size: 1.2em;
            color: #333;
        }

        /* Загрузка */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.8);
            z-index: 1001;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.3s ease;
            opacity: 0;
        }
        .loading.show {
            opacity: 1;
        }

        .spinner {
            width: 60px; /* Крупнее спиннер */
            height: 60px;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Уведомления */
        .notification {
            position: fixed;
            top: 25px; /* Чуть ниже */
            right: 25px;
            background: #27ae60;
            color: white;
            padding: 18px 30px; /* Увеличенный отступ */
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.25);
            transform: translateX(500px); /* Смещение для анимации */
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Более интересная анимация */
            z-index: 1002;
            font-size: 1.1em;
            font-weight: 600;
        }

        .notification.show {
            transform: translateX(0);
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .header {
                padding: 20px;
                margin-bottom: 30px;
            }
            .header h1 {
                font-size: 2.8em;
            }
            .header p {
                font-size: 1em;
            }
            .search-bar {
                padding: 12px;
                margin-bottom: 30px;
            }
            .search-bar input {
                font-size: 1em;
            }
            .categories {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 40px;
            }
            .category-card {
                padding: 25px;
            }
            .category-icon {
                width: 70px;
                height: 70px;
                font-size: 2em;
                margin-bottom: 15px;
            }
            .category-card h3 {
                font-size: 1.3em;
            }
            .popular-section {
                padding: 30px;
            }
            .popular-section h2 {
                font-size: 2em;
                margin-bottom: 25px;
            }
            .products-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .product-card {
                padding: 20px;
            }
            .product-image {
                width: 100px;
                height: 100px;
                font-size: 3em;
                margin-bottom: 20px;
            }
            .product-card h3 {
                font-size: 1.2em;
            }
            .promo-section {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 40px;
            }
            .promo-card {
                padding: 25px;
            }
            .promo-card h3 {
                font-size: 1.4em;
            }
            .navbar {
                padding: 12px 0;
            }
            .navbar-content {
                flex-wrap: wrap;
                gap: 10px;
            }
            .nav-item {
                padding: 8px 15px;
                font-size: 0.9em;
            }
            .modal-content {
                width: 95%;
                padding: 25px;
            }
            .modal h2 {
                font-size: 1.8em;
            }
            .modal p {
                font-size: 0.95em;
            }
            .btn {
                padding: 10px 20px;
                font-size: 1em;
            }
            .quantity-selector {
                gap: 10px;
            }
            .quantity-btn {
                width: 30px;
                height: 30px;
                font-size: 1.2em;
            }
            .quantity-display {
                padding: 5px 10px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ARYS</h1>
            <p>Центр строительных решений</p>
        </header>

        <div class="search-bar">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input type="text" placeholder="Найти товар или услугу..." id="searchInput">
        </div>

        <div class="categories">
            <div class="category-card" onclick="openCategory('materials')">
                <div class="category-icon materials">📦</div>
                <h3>Материалы</h3>
                <p>1247 товаров</p>
            </div>
            <div class="category-card" onclick="openCategory('rent')">
                <div class="category-icon rent">🛠️</div>
                <h3>Прокат</h3>
                <p>87 инструментов</p>
            </div>
            <div class="category-card" onclick="openCategory('courses')">
                <div class="category-icon courses">🎓</div>
                <h3>Курсы</h3>
                <p>15 мастер-классов</p>
            </div>
            <div class="category-card" onclick="openCategory('consultation')">
                <div class="category-icon consultation">❓</div>
                <h3>Консультации</h3>
                <p>Проекты, сметы</p>
            </div>
            <div class="category-card" onclick="openCategory('delivery')">
                <div class="category-icon delivery">🚚</div>
                <h3>Доставка</h3>
                <p>По всему городу</p>
            </div>
            <div class="category-card" onclick="openCategory('profile')">
                <div class="category-icon profile">👤</div>
                <h3>Профиль</h3>
                <p>Мои заказы</p>
            </div>
        </div>

        <div class="popular-section">
            <h2>Популярные товары</h2>
            <div class="products-grid" id="popularProductsGrid">
                <!-- Products will be loaded here by JS -->
                <div class="product-card" onclick="openProduct('brick')">
                    <div class="product-image brick">🧱</div>
                    <h3>Кирпич красный</h3>
                    <div class="product-price">85 ₸/шт</div>
                    <span class="product-tag in-stock">В наличии</span>
                </div>
                <div class="product-card" onclick="openProduct('gravel')">
                    <div class="product-image gravel">🪨</div>
                    <h3>Щебень фракция 5-20</h3>
                    <div class="product-price">500 ₸/м³</div>
                    <span class="product-tag on-order">Под заказ</span>
                </div>
                <div class="product-card" onclick="openProduct('cement')">
                    <div class="product-image cement">🏗️</div>
                    <h3>Цемент М400</h3>
                    <div class="product-price">2100 ₸/мешок</div>
                    <span class="product-tag out-of-stock">Нет в наличии</span>
                </div>
            </div>
        </div>

        <div class="promo-section">
            <div class="promo-card telegram-promo" onclick="openTelegramOrder()">
                <h3>📱 Быстрый заказ через Telegram</h3>
                <p>Отправьте фото или список - мы посчитаем стоимость и доставим быстро!</p>
            </div>
            <div class="promo-card course-promo" onclick="openCourseInfo()">
                <h3>🎯 Новый курс "Укладка плитки"</h3>
                <p>Начало 15 июля, запись открыта. Изучите профессию за 2 недели!</p>
            </div>
        </div>

        <nav class="navbar">
            <div class="navbar-content">
                <a href="#" class="nav-item active" id="navHome">Главная</a>
                <a href="#" class="nav-item" id="navCatalog">Каталог</a>
                <a href="#" class="nav-item cart-icon" id="navCart">
                    Корзина
                    <span class="cart-badge" id="cartBadge">0</span>
                </a>
                <a href="#" class="nav-item" id="navOrders">Заказы</a>
                <a href="#" class="nav-item" id="navProfile">Профиль</a>
            </div>
        </nav>
    </div>

    <!-- Модальные окна -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <!-- Загрузка -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>Загрузка...</p>
    </div>

    <!-- Уведомление -->
    <div id="notification" class="notification">
        <span id="notification-text"></span>
    </div>

    <script>
        // Данные о товарах, инструментах и курсах
        const products = {
            brick: {
                name: "Кирпич красный",
                price: 85,
                unit: "шт",
                description: "Высококачественный керамический кирпич красного цвета. Идеально подходит для строительства стен, перегородок и декоративных элементов.",
                specifications: [
                    "Размер: 250×120×65 мм",
                    "Марка прочности: М150",
                    "Морозостойкость: F50",
                    "Теплопроводность: 0.56 Вт/(м·°C)",
                    "Водопоглощение: 8-10%"
                ],
                inStock: true,
                image: "🧱",
                type: "materials"
            },
            gravel: {
                name: "Щебень фракция 5-20",
                price: 500,
                unit: "м³",
                description: "Гранитный щебень фракции 5-20 мм. Применяется для изготовления бетона, дорожных работ и благоустройства территории.",
                specifications: [
                    "Фракция: 5-20 мм",
                    "Марка по прочности: М1200",
                    "Морозостойкость: F300",
                    "Лещадность: 7-15%",
                    "Насыпная плотность: 1,4 т/м³"
                ],
                inStock: false,
                image: "🪨",
                type: "materials"
            },
            cement: {
                name: "Цемент М400",
                price: 2100,
                unit: "мешок",
                description: "Портландцемент марки М400. Универсальный строительный материал для приготовления растворов и бетонов.",
                specifications: [
                    "Вес мешка: 50 кг",
                    "Марка: М400 (ПЦ 400 Д20)",
                    "Время схватывания: 45-10 часов",
                    "Прочность на сжатие: 40 МПа",
                    "Срок годности: 12 месяцев"
                ],
                inStock: false,
                image: "🏗️",
                type: "materials"
            },
            drill: {
                name: "Дрель ударная Makita",
                price: 700,
                unit: "день",
                description: "Мощная ударная дрель для сверления отверстий в различных материалах. Идеально подходит для профессионального использования.",
                specifications: [
                    "Мощность: 800 Вт",
                    "Патрон: быстрозажимной 13 мм",
                    "Число оборотов: 0-2800 об/мин",
                    "Режимы: сверление, ударное сверление",
                    "Вес: 2.5 кг"
                ],
                inStock: true,
                image: " ड्रिल",
                type: "tool-rental"
            },
            perforator: {
                name: "Перфоратор Bosch",
                price: 1200,
                unit: "день",
                description: "Профессиональный перфоратор для работы с бетоном и камнем. Высокая производительность и надежность.",
                specifications: [
                    "Мощность: 1000 Вт",
                    "Энергия удара: 3.2 Дж",
                    "Тип патрона: SDS-Plus",
                    "Режимы: сверление, долбление, сверление с ударом",
                    "Вес: 3.5 кг"
                ],
                inStock: true,
                image: "🔨",
                type: "tool-rental"
            },
            tiles_course: {
                name: "Курс: Укладка плитки",
                price: 25000,
                unit: "курс",
                description: "Полный курс по профессиональной укладке плитки. Теория и практика, все секреты мастерства.",
                specifications: [
                    "Длительность: 2 недели",
                    "Формат: очно",
                    "Преподаватель: Мастер с 10-летним опытом",
                    "Сертификат: по окончании курса",
                    "Группа: до 10 человек"
                ],
                inStock: true,
                image: " tile",
                type: "courses"
            },
            drywall_course: {
                name: "Курс: Работа с гипсокартоном",
                price: 20000,
                unit: "курс",
                description: "Научитесь быстро и качественно работать с гипсокартоном. Создавайте перегородки, потолки и ниши.",
                specifications: [
                    "Длительность: 1 неделя",
                    "Формат: очно",
                    "Преподаватель: Прораб-практик",
                    "Сертификат: по окончании курса",
                    "Группа: до 8 человек"
                ],
                inStock: true,
                image: " drywall",
                type: "courses"
            }
        };

        const categoriesData = {
            materials: {
                name: "Материалы",
                description: "Широкий ассортимент строительных материалов для любых задач",
                items: [
                    { name: "Кирпич и блоки", emoji: "🧱" },
                    { name: "Цемент и сухие смеси", emoji: "�️" },
                    { name: "Щебень, песок, гравий", emoji: "🪨" },
                    { name: "Арматура и металлопрокат", emoji: "🔗" },
                    { name: "Пиломатериалы", emoji: "🪵" },
                    { name: "Кровельные материалы", emoji: "🏠" },
                    { name: "Утеплители", emoji: "🌡️" },
                    { name: "Отделочные материалы", emoji: "🎨" }
                ],
                type: "materials"
            },
            rent: {
                name: "Прокат инструментов",
                description: "Аренда профессионального строительного инструмента",
                items: [
                    { name: "Перфораторы и дрели", emoji: " ड्रिल" },
                    { name: "Болгарки и пилы", emoji: "🔪" },
                    { name: "Компрессоры", emoji: "💨" },
                    { name: "Генераторы", emoji: "⚡" },
                    { name: "Строительные леса", emoji: "🪜" },
                    { name: "Бетономешалки", emoji: "🔄" },
                    { name: "Вибраторы для бетона", emoji: " vibrating" },
                    { name: "Измерительные приборы", emoji: "📏" }
                ],
                type: "tool-rental"
            },
            courses: {
                name: "Обучающие курсы",
                description: "Профессиональные курсы строительных специальностей",
                items: [
                    { name: "Укладка плитки", emoji: " tile" },
                    { name: "Малярные работы", emoji: "🖌️" },
                    { name: "Электромонтаж", emoji: "💡" },
                    { name: "Сантехнические работы", emoji: "🚿" },
                    { name: "Кровельные работы", emoji: " roof" },
                    { name: "Работа с гипсокартоном", emoji: " drywall" },
                    { name: "Ландшафтный дизайн", emoji: "🌳" },
                    { name: "Основы строительства", emoji: "🏗️" }
                ],
                type: "courses"
            },
            consultation: {
                name: "Консультации",
                description: "Профессиональные консультации и проектирование",
                items: [
                    { name: "Расчет материалов", emoji: "📊" },
                    { name: "Составление смет", emoji: "💰" },
                    { name: "Проектирование", emoji: "📐" },
                    { name: "Техническое сопровождение", emoji: "👷" },
                    { name: "Подбор решений", emoji: "💡" },
                    { name: "Контроль качества", emoji: "✅" },
                    { name: "Выезд специалиста", emoji: "🚗" },
                    { name: "Онлайн консультации", emoji: "💻" }
                ],
                type: "consultation"
            },
            delivery: {
                name: "Доставка",
                description: "Быстрая и надежная доставка по всему городу",
                items: [
                    { name: "Доставка по городу", emoji: "🏙️" },
                    { name: "Доставка в область", emoji: "🏞️" },
                    { name: "Срочная доставка", emoji: "⏱️" },
                    { name: "Подъем на этаж", emoji: "🪜" },
                    { name: "Разгрузка", emoji: "⬇️" },
                    { name: "Доставка в выходные", emoji: "📅" },
                    { name: "Крупногабаритные грузы", emoji: "📦" },
                    { name: "Специальный транспорт", emoji: "🚛" }
                ],
                type: "delivery"
            },
            profile: {
                name: "Личный кабинет",
                description: "Управление заказами и личными данными",
                items: [
                    { name: "Мои заказы", emoji: "🛒" },
                    { name: "История покупок", emoji: "📜" },
                    { name: "Личные данные", emoji: "👤" },
                    { name: "Адреса доставки", emoji: "📍" },
                    { name: "Способы оплаты", emoji: "💳" },
                    { name: "Бонусная программа", emoji: "🌟" },
                    { name: "Уведомления", emoji: "🔔" },
                    { name: "Настройки", emoji: "⚙️" }
                ],
                type: "profile"
            }
        };

        let cart = []; // Массив для хранения товаров в корзине: [{ productKey: 'brick', quantity: 2 }]
        let cartTotalItems = 0; // Общее количество товаров в корзине

        // Получение ссылок на DOM-элементы
        const searchInput = document.getElementById('searchInput');
        const cartBadge = document.getElementById('cartBadge');
        const modal = document.getElementById('modal');
        const modalBody = document.getElementById('modal-body');
        const loadingScreen = document.getElementById('loading');
        const notificationElement = document.getElementById('notification');
        const notificationText = document.getElementById('notification-text');

        // --- Вспомогательные функции ---

        function showLoading() {
            loadingScreen.classList.add('show');
        }

        function hideLoading() {
            loadingScreen.classList.remove('show');
        }

        function showNotification(message) {
            notificationText.textContent = message;
            notificationElement.classList.add('show');
            setTimeout(() => {
                notificationElement.classList.remove('show');
            }, 3000);
        }

        function openModal() {
            modal.classList.add('show');
        }

        function closeModal() {
            modal.classList.remove('show');
            modalBody.innerHTML = ''; // Очищаем содержимое модального окна
        }

        function updateCartBadge() {
            cartTotalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartBadge.textContent = cartTotalItems;
        }

        function addToCart(productKey, quantity = 1) {
            const product = products[productKey];
            if (!product) {
                showNotification("Ошибка: Товар не найден!");
                return;
            }

            const existingItemIndex = cart.findIndex(item => item.productKey === productKey);

            if (existingItemIndex > -1) {
                cart[existingItemIndex].quantity += quantity;
            } else {
                cart.push({ productKey, quantity });
            }
            updateCartBadge();
            showNotification(`"${product.name}" (${quantity} ${product.unit}) добавлен в корзину!`);
            console.log("Корзина:", cart);
        }

        // --- Функции для открытия страниц/модальных окон ---

        // Открытие деталей категории (в модальном окне)
        function openCategory(categoryKey) {
            showLoading();
            setTimeout(() => {
                const category = categoriesData[categoryKey];
                if (!category) {
                    modalBody.innerHTML = `<h2>Ошибка</h2><p>Категория не найдена.</p><button class="btn" onclick="closeModal()">Закрыть</button>`;
                    hideLoading();
                    openModal();
                    return;
                }

                modalBody.innerHTML = `
                    <h2>${category.name}</h2>
                    <p style="color: #7f8c8d; margin-bottom: 25px;">${category.description}</p>
                    <div class="products-grid">
                        ${category.items.map(item => `
                            <div class="product-card" style="padding: 20px;"
                                 onclick="showNotification('Переход к: ${item.name}')">
                                <div class="product-image" style="font-size: 3em; width: 80px; height: 80px; background: ${category.type === 'materials' ? '#3498db' : (category.type === 'tool-rental' ? '#e74c3c' : (category.type === 'courses' ? '#f39c12' : '#27ae60'))};">
                                    ${item.emoji}
                                </div>
                                <h3>${item.name}</h3>
                                <p style="margin-top: 10px; color: #7f8c8d; font-size: 0.9em;">Подробнее</p>
                            </div>
                        `).join('')}
                    </div>
                    <button class="btn" onclick="closeModal()" style="margin-top: 25px;">Закрыть</button>
                `;
                hideLoading();
                openModal();
            }, 500);
        }

        // Открытие деталей товара (в модальном окне)
        function openProduct(productKey) {
            showLoading();
            setTimeout(() => {
                const product = products[productKey];
                if (!product) {
                    modalBody.innerHTML = `<h2>Ошибка</h2><p>Товар не найден.</p><button class="btn" onclick="closeModal()">Закрыть</button>`;
                    hideLoading();
                    openModal();
                    return;
                }

                let currentQuantity = 1;

                modalBody.innerHTML = `
                    <div style="display: flex; flex-direction: column; gap: 20px;">
                        <div style="display: flex; gap: 30px; align-items: start; flex-wrap: wrap;">
                            <div style="font-size: 6em; background: linear-gradient(135deg, #3498db, #2980b9); min-width: 150px; min-height: 150px; border-radius: 20px; color: white; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                ${product.image}
                            </div>
                            <div style="flex: 1; min-width: 200px;">
                                <h2>${product.name}</h2>
                                <div style="font-size: 1.8em; color: #27ae60; font-weight: bold; margin: 15px 0;">
                                    ${product.price} ₸/${product.unit}
                                </div>
                                <span class="product-tag ${product.inStock ? 'in-stock' : 'out-of-stock'}">
                                    ${product.inStock ? 'В наличии' : 'Нет в наличии'}
                                </span>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h3>Описание</h3>
                            <p>${product.description}</p>
                        </div>

                        <div style="margin-top: 20px;">
                            <h3>Характеристики:</h3>
                            <ul style="list-style: disc; margin-left: 20px; color: #555;">
                                ${product.specifications.map(spec => `<li>${spec}</li>`).join('')}
                            </ul>
                        </div>

                        ${product.inStock ? `
                            <div class="quantity-selector">
                                <button class="quantity-btn" onclick="updateQuantity(-1, '${productKey}')">-</button>
                                <span id="quantityDisplay_${productKey}" class="quantity-display">${currentQuantity}</span>
                                <button class="quantity-btn" onclick="updateQuantity(1, '${productKey}')">+</button>
                            </div>
                            <button class="btn" onclick="addToCart('${productKey}', document.getElementById('quantityDisplay_${productKey}').textContent)">
                                ${product.type === 'tool-rental' ? 'Арендовать' : 'Добавить в корзину'}
                            </button>
                        ` : `
                            <p style="color: #e74c3c; font-weight: bold; margin-top: 20px;">Товар временно отсутствует.</p>
                            <button class="btn" onclick="showNotification('Уведомить о поступлении товара')" style="background: #f39c12;">Уведомить о поступлении</button>
                        `}
                        <button class="btn" onclick="closeModal()" style="background: #7f8c8d;">Закрыть</button>
                    </div>
                `;
                hideLoading();
                openModal();
            }, 500);
        }

        // Обновление количества в модальном окне товара
        function updateQuantity(change, productKey) {
            const quantityDisplay = document.getElementById(`quantityDisplay_${productKey}`);
            let currentQuantity = parseInt(quantityDisplay.textContent);
            currentQuantity += change;
            if (currentQuantity < 1) currentQuantity = 1; // Минимальное количество 1
            quantityDisplay.textContent = currentQuantity;
        }

        // Открытие модального окна для быстрого заказа через Telegram
        function openTelegramOrder() {
            showLoading();
            setTimeout(() => {
                modalBody.innerHTML = `
                    <h2>Быстрый заказ через Telegram</h2>
                    <p>Для быстрого заказа отправьте фото или список товаров в наш Telegram-канал. Мы свяжемся с вами для уточнения деталей и расчета стоимости.</p>
                    <button class="btn" onclick="window.open('https://t.me/your_telegram_channel', '_blank'); closeModal();">Перейти в Telegram</button>
                    <button class="btn" onclick="closeModal()" style="background: #7f8c8d;">Закрыть</button>
                `;
                hideLoading();
                openModal();
            }, 500);
        }

        // Открытие модального окна для информации о курсе
        function openCourseInfo() {
            showLoading();
            setTimeout(() => {
                modalBody.innerHTML = `
                    <h2>Новый курс "Укладка плитки"</h2>
                    <p>Начало 15 июля, запись открыта. Изучите профессию за 2 недели!</p>
                    <p>Оставьте свои контактные данные, и наш менеджер свяжется с вами для оформления записи на курс.</p>
                    <button class="btn" onclick="showNotification('Ваша заявка на курс принята!'); closeModal();">Записаться</button>
                    <button class="btn" onclick="closeModal()" style="background: #7f8c8d;">Закрыть</button>
                `;
                hideLoading();
                openModal();
            }, 500);
        }

        // --- Обработчики навигационных кнопок ---

        function renderHomePage() {
            showLoading();
            setTimeout(() => {
                mainContent.innerHTML = `
                    <header class="header">
                        <h1>ARYS</h1>
                        <p>Центр строительных решений</p>
                    </header>

                    <div class="search-bar">
                        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <input type="text" placeholder="Найти товар или услугу..." id="searchInput">
                    </div>

                    <div class="categories">
                        <div class="category-card" onclick="openCategory('materials')">
                            <div class="category-icon materials">📦</div>
                            <h3>Материалы</h3>
                            <p>1247 товаров</p>
                        </div>
                        <div class="category-card" onclick="openCategory('rent')">
                            <div class="category-icon rent">🛠️</div>
                            <h3>Прокат</h3>
                            <p>87 инструментов</p>
                        </div>
                        <div class="category-card" onclick="openCategory('courses')">
                            <div class="category-icon courses">🎓</div>
                            <h3>Курсы</h3>
                            <p>15 мастер-классов</p>
                        </div>
                        <div class="category-card" onclick="openCategory('consultation')">
                            <div class="category-icon consultation">❓</div>
                            <h3>Консультации</h3>
                            <p>Проекты, сметы</p>
                        </div>
                        <div class="category-card" onclick="openCategory('delivery')">
                            <div class="category-icon delivery">🚚</div>
                            <h3>Доставка</h3>
                            <p>По всему городу</p>
                        </div>
                        <div class="category-card" onclick="openCategory('profile')">
                            <div class="category-icon profile">👤</div>
                            <h3>Профиль</h3>
                            <p>Мои заказы</p>
                        </div>
                    </div>

                    <div class="popular-section">
                        <h2>Популярные товары</h2>
                        <div class="products-grid" id="popularProductsGrid">
                            <div class="product-card" onclick="openProduct('brick')">
                                <div class="product-image brick">🧱</div>
                                <h3>Кирпич красный</h3>
                                <div class="product-price">85 ₸/шт</div>
                                <span class="product-tag in-stock">В наличии</span>
                            </div>
                            <div class="product-card" onclick="openProduct('gravel')">
                                <div class="product-image gravel">🪨</div>
                                <h3>Щебень фракция 5-20</h3>
                                <div class="product-price">500 ₸/м³</div>
                                <span class="product-tag on-order">Под заказ</span>
                            </div>
                            <div class="product-card" onclick="openProduct('cement')">
                                <div class="product-image cement">🏗️</div>
                                <h3>Цемент М400</h3>
                                <div class="product-price">2100 ₸/мешок</div>
                                <span class="product-tag out-of-stock">Нет в наличии</span>
                            </div>
                        </div>
                    </div>

                    <div class="promo-section">
                        <div class="promo-card telegram-promo" onclick="openTelegramOrder()">
                            <h3>📱 Быстрый заказ через Telegram</h3>
                            <p>Отправьте фото или список - мы посчитаем стоимость и доставим быстро!</p>
                        </div>
                        <div class="promo-card course-promo" onclick="openCourseInfo()">
                            <h3>🎯 Новый курс "Укладка плитки"</h3>
                            <p>Начало 15 июля, запись открыта. Изучите профессию за 2 недели!</p>
                        </div>
                    </div>
                `;
                // Re-attach search input listener after content is loaded
                document.getElementById('searchInput').addEventListener('keyup', handleSearchInput);
                hideLoading();
            }, 500);
        }

        function renderCatalogPage() {
            showLoading();
            setTimeout(() => {
                let allProductsHtml = '';
                for (const key in products) {
                    const product = products[key];
                    allProductsHtml += `
                        <div class="product-card" onclick="openProduct('${key}')">
                            <div class="product-image" style="background: ${product.type === 'materials' ? '#e67e22' : (product.type === 'tool-rental' ? '#3498db' : '#f39c12')};">${product.image}</div>
                            <h3>${product.name}</h3>
                            <div class="product-price">${product.price} ₸/${product.unit}</div>
                            <span class="product-tag ${product.inStock ? 'in-stock' : 'out-of-stock'}">
                                ${product.inStock ? 'В наличии' : 'Нет в наличии'}
                            </span>
                        </div>
                    `;
                }
                mainContent.innerHTML = `
                    <div class="popular-section">
                        <h2>Весь каталог товаров</h2>
                        <div class="products-grid" id="catalogProductsGrid">
                            ${allProductsHtml}
                        </div>
                    </div>
                `;
                hideLoading();
            }, 500);
        }

        function renderCartPage() {
            showLoading();
            setTimeout(() => {
                let cartItemsHtml = '';
                if (cart.length === 0) {
                    cartItemsHtml = '<p>Ваша корзина пуста.</p>';
                } else {
                    cartItemsHtml = `
                        <div style="display: grid; grid-template-columns: 1fr; gap: 20px;">
                            ${cart.map(item => {
                                const product = products[item.productKey];
                                return `
                                    <div style="display: flex; align-items: center; gap: 20px; background: #f8f9fa; padding: 15px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
                                        <div style="font-size: 2.5em; flex-shrink: 0;">${product.image}</div>
                                        <div style="flex-grow: 1;">
                                            <h3 style="font-size: 1.2em; font-weight: 600;">${product.name}</h3>
                                            <p style="color: #555;">Количество: ${item.quantity} ${product.unit}</p>
                                            <p style="font-weight: bold; color: #27ae60;">${product.price * item.quantity} ₸</p>
                                        </div>
                                        <button class="btn" style="background: #e74c3c; padding: 8px 15px; font-size: 0.9em;" onclick="removeFromCart('${item.productKey}')">Удалить</button>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        <div style="text-align: right; margin-top: 30px; font-size: 1.5em; font-weight: bold; color: #2c3e50;">
                            Итого: ${cart.reduce((total, item) => total + products[item.productKey].price * item.quantity, 0)} ₸
                        </div>
                        <button class="btn" style="margin-top: 30px; width: 100%;" onclick="showNotification('Оформление заказа...'); closeModal();">Оформить заказ</button>
                    `;
                }
                modalBody.innerHTML = `
                    <h2>Ваша Корзина</h2>
                    ${cartItemsHtml}
                    <button class="btn" onclick="closeModal()" style="background: #7f8c8d; margin-top: 20px;">Закрыть</button>
                `;
                hideLoading();
                openModal();
            }, 500);
        }

        function removeFromCart(productKey) {
            cart = cart.filter(item => item.productKey !== productKey);
            updateCartBadge();
            renderCartPage(); // Перерендерить корзину
            showNotification(`Товар удален из корзины.`);
        }

        function renderOrdersPage() {
            showLoading();
            setTimeout(() => {
                modalBody.innerHTML = `
                    <h2>Мои Заказы</h2>
                    <p>Здесь будет отображаться история ваших заказов.</p>
                    <p>Пока у вас нет активных или завершенных заказов.</p>
                    <button class="btn" onclick="closeModal()">Закрыть</button>
                `;
                hideLoading();
                openModal();
            }, 500);
        }

        function renderProfilePage() {
            showLoading();
            setTimeout(() => {
                modalBody.innerHTML = `
                    <h2>Мой Профиль</h2>
                    <p>Добро пожаловать в ваш личный кабинет!</p>
                    <p>Здесь вы можете управлять своими данными, адресами доставки и настройками.</p>
                    <ul style="list-style: disc; margin-left: 20px; color: #555; margin-top: 20px;">
                        <li>Личные данные</li>
                        <li>Адреса доставки</li>
                        <li>Способы оплаты</li>
                        <li>Бонусная программа</li>
                    </ul>
                    <button class="btn" onclick="closeModal()">Закрыть</button>
                `;
                hideLoading();
                openModal();
            }, 500);
        }


        // --- Инициализация и слушатели событий ---

        document.addEventListener('DOMContentLoaded', () => {
            renderHomePage(); // Загружаем главную страницу по умолчанию

            // Слушатель для поиска
            searchInput.addEventListener('keyup', function() {
                const searchTerm = searchInput.value.toLowerCase();
                let searchResults = [];

                // Поиск по всем продуктам и курсам
                for (const key in products) {
                    if (products[key].name.toLowerCase().includes(searchTerm)) {
                        searchResults.push({ key: key, ...products[key] });
                    }
                }
                for (const key in coursesData) {
                    if (coursesData[key].name.toLowerCase().includes(searchTerm)) {
                        searchResults.push({ key: key, ...coursesData[key], isCourse: true });
                    }
                }

                showLoading();
                setTimeout(() => {
                    let searchResultsHtml = '';
                    if (searchResults.length === 0) {
                        searchResultsHtml = `<p class="text-center text-gray-600 text-xl py-8">По вашему запросу ничего не найдено.</p>`;
                    } else {
                        searchResultsHtml = `
                            <div class="products-grid">
                                ${searchResults.map(item => `
                                    <div class="product-card" onclick="openProduct('${item.key}')">
                                        <div class="product-image" style="background: ${item.type === 'materials' ? '#e67e22' : (item.type === 'tool-rental' ? '#3498db' : '#f39c12')};">${item.image}</div>
                                        <h3>${item.name}</h3>
                                        <div class="product-price">${item.isCourse ? item.price + ' ₸/курс' : item.price + ' ₸/' + item.unit}</div>
                                        <span class="product-tag ${item.inStock ? 'in-stock' : 'out-of-stock'}">
                                            ${item.inStock ? 'В наличии' : 'Нет в наличии'}
                                        </span>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                    }
                    modalBody.innerHTML = `
                        <h2>Результаты поиска для "${searchInput.value}"</h2>
                        ${searchResultsHtml}
                        <button class="btn" onclick="closeModal()" style="background: #7f8c8d; margin-top: 20px;">Закрыть</button>
                    `;
                    hideLoading();
                    openModal();
                }, 500);
            });

            // Слушатель для переключения языка (эмуляция)
            // В данной версии сайта, с учетом новой структуры, функционал переключения языка не реализован
            // для всех элементов, так как это требует значительной переработки всех текстовых блоков.
            // Если требуется полная локализация, это будет отдельная большая задача.
            // languageToggle.addEventListener('click', handleLanguageToggle); // Закомментировано, так как data-lang-ru/en удалены

            // Слушатели для закрытия модального окна
            document.querySelector('.close-modal').addEventListener('click', closeModal);
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeModal();
                }
            });

            // Слушатели для навигационных кнопок в нижней панели
            document.getElementById('navHome').addEventListener('click', (e) => { e.preventDefault(); renderHomePage(); showNotification('Переход на Главную'); });
            document.getElementById('navCatalog').addEventListener('click', (e) => { e.preventDefault(); renderCatalogPage(); showNotification('Переход в Каталог'); });
            document.getElementById('navCart').addEventListener('click', (e) => { e.preventDefault(); renderCartPage(); showNotification('Открытие Корзины'); });
            document.getElementById('navOrders').addEventListener('click', (e) => { e.preventDefault(); renderOrdersPage(); showNotification('Открытие Заказов'); });
            document.getElementById('navProfile').addEventListener('click', (e) => { e.preventDefault(); renderProfilePage(); showNotification('Открытие Профиля'); });

            // Изначальное обновление счетчика корзины
            updateCartBadge();
        });
    </script>
</body>
</html>
